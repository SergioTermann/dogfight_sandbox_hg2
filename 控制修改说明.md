# ✅ 控制设置已修改

## 已完成的修改

### 1. 键盘控制映射 (`source/scripts/aircraft_user_inputs_mapping.json`)

#### 油门控制
- **加速（增加推力）**: `Home` → **`W` 键** ✅
- **减速（降低推力）**: `End` → **`S` 键** ✅

#### 俯仰控制（已反转）
- **抬头（PITCH_UP）**: `↑` → **`↓` 键** ✅
- **低头（PITCH_DOWN）**: `↓` → **`↑` 键** ✅

#### 其他保持不变
- **左滚转**: `←` 左箭头
- **右滚转**: `→` 右箭头
- **加力燃烧**: `Space` 空格键
- **开火（机枪）**: `Enter` 回车
- **发射导弹**: `F1`
- **起落架**: `G`
- **激活 AI**: `I`
- **激活自动驾驶**: `A`

---

## 🎮 新的操作方式

### WASD 风格控制

```
     ↑ (低头)
      |
W (加速)
      |
S (减速)
      |
     ↓ (抬头)

←  滚转左   滚转右 →
```

现在更符合现代飞行游戏的习惯！

---

## 🤖 AI 战斗模式优化建议

我找到了 AI 战斗模式的参数配置（在 `source/MachineDevice.py` 的 `AircraftIAControlDevice` 类中）。

### 当前 AI 参数

```python
# 初始化参数（第 1717-1740 行）
self.IA_fire_missiles_delay = 10         # 导弹发射间隔（秒）
self.IA_target_distance_fight = 3000     # 开始战斗的距离（米）
self.IA_altitude_min = 500               # 最低飞行高度（米）
self.IA_altitude_max = 8000              # 最高飞行高度（米）
self.IA_altitude_safe = 1500             # 安全高度（米）
self.IA_gun_distance_max = 1000          # 机枪射击最大距离（米）
self.IA_gun_angle = 10                   # 机枪射击角度范围（度）
```

### 优化建议

如果您想让 AI 战斗更舒服（更智能/更有挑战性），可以调整这些参数：

#### 方案一：让 AI 更激进

```python
self.IA_fire_missiles_delay = 5          # 导弹发射更快（10 → 5秒）
self.IA_target_distance_fight = 5000     # 更远距离就开始战斗（3000 → 5000米）
self.IA_gun_distance_max = 1500          # 机枪射击距离更远（1000 → 1500米）
self.IA_gun_angle = 15                   # 机枪射击角度更宽（10 → 15度）
```

#### 方案二：让 AI 更保守（适合学习）

```python
self.IA_fire_missiles_delay = 15         # 导弹发射更慢
self.IA_target_distance_fight = 2000     # 更近才战斗
self.IA_gun_distance_max = 800           # 机枪射击距离更近
self.IA_gun_angle = 8                    # 机枪射击角度更窄
```

#### 方案三：调整飞行高度（避免撞地）

```python
self.IA_altitude_min = 800               # 提高最低高度（500 → 800米）
self.IA_altitude_safe = 2000             # 提高安全高度（1500 → 2000米）
```

### 如何修改

编辑文件 `source/MachineDevice.py`，找到第 **1725-1738** 行，修改相应参数。

---

## 🎯 测试新控制

启动游戏后：

1. **测试键位**
   - 按 `W` 加速 → 应该看到油门增加
   - 按 `S` 减速 → 应该看到油门降低
   - 按 `↑` → 飞机低头（现在是 PITCH_DOWN）
   - 按 `↓` → 飞机抬头（现在是 PITCH_UP）

2. **测试 AI**
   - 按 `I` 激活 AI 控制
   - 观察 AI 的战斗行为
   - 按 `U` 切换回手动控制

---

## 📝 完整键位表

| 功能 | 键位 | 说明 |
|------|------|------|
| **飞行控制** |
| 加速 | `W` | 增加推力 |
| 减速 | `S` | 降低推力 |
| 低头 | `↑` | 俯仰向下 |
| 抬头 | `↓` | 俯仰向上 |
| 左滚转 | `←` | 向左倾斜 |
| 右滚转 | `→` | 向右倾斜 |
| 左偏航 | `Delete` | 机头左转 |
| 右偏航 | `Page Down` | 机头右转 |
| **武器** |
| 机枪开火 | `Enter` | 连续射击 |
| 发射导弹 | `F1` | 发射一枚导弹 |
| 下一个目标 | `T` | 切换锁定目标 |
| 重新装弹 | `F5` | 补充弹药 |
| **系统** |
| 加力燃烧 | `Space` | 开关后燃器 |
| 起落架 | `G` | 升降起落架 |
| 刹车 +/- | `B` / `N` | 地面刹车 |
| 襟翼 +/- | `C` / `V` | 增减襟翼 |
| 简易转向 | `E` | 辅助转向模式 |
| **模式切换** |
| 激活 AI | `I` | AI 自动控制 |
| 取消 AI | `U` | 返回手动控制 |
| 自动驾驶 | `A` | 自动飞行 |
| 切换视角 | `C` | 驾驶舱/外部 |

---

## 需要进一步调整 AI？

如果您想要更详细地调整 AI 战斗行为，告诉我具体需求：

1. **AI 太激进/太保守？** → 调整攻击距离和角度
2. **AI 飞得太低/太高？** → 调整高度范围
3. **AI 导弹发射太频繁/太少？** → 调整发射间隔
4. **AI 机动性能？** → 调整推力和爬升策略

我可以帮您精确修改这些参数！

